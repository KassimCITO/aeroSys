{% extends "base.html" %}
{% block title %}Torre de Control{% endblock %}

{% block content %}
    <!-- Mensajes Flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div id="flash-messages-container">
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                        {% if category == 'success' %}
                            <i class="fas fa-check-circle me-2"></i>
                        {% elif category == 'danger' %}
                            <i class="fas fa-exclamation-circle me-2"></i>
                        {% elif category == 'warning' %}
                            <i class="fas fa-exclamation-triangle me-2"></i>
                        {% elif category == 'info' %}
                            <i class="fas fa-info-circle me-2"></i>
                        {% endif %}
                        {{ message }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

<div class="container">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Dashboard</h2>
    </div>

    <div class="row">
        <div class="col-md-3 mb-4">
            <div class="card bg-primary text-white">
                <div class="card-body">
                    <h5 class="card-title">Aeronaves</h5>
                    <p class="card-text display-4">{{ total_a }}</p>
                    <a href="{{ url_for('main.page_aeronaves') }}" class="text-white">
                        <i class="fas fa-plane"></i> Ver detalles
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-3 mb-4">
            <div class="card bg-success text-white">
                <div class="card-body">
                    <h5 class="card-title">Pilotos</h5>
                    <p class="card-text display-4">{{ total_p }}</p>
                    <a href="{{ url_for('main.page_pilotos') }}" class="text-white">
                        <i class="fas fa-user-astronaut"></i> Ver detalles
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-3 mb-4">
            <div class="card bg-info text-white">
                <div class="card-body">
                    <h5 class="card-title">Vuelos</h5>
                    <p class="card-text display-4">{{ total_v }}</p>
                    <a href="{{ url_for('main.page_vuelos') }}" class="text-white">
                        <i class="fas fa-plane-departure"></i> Ver detalles
                    </a>
                </div>
            </div>
        </div>
        
        <div class="col-md-3 mb-4">
            <div class="card bg-warning text-white">
                <div class="card-body">
                    <h5 class="card-title">Confirmaciones</h5>
                    <p class="card-text display-4">{{ total_c }}</p>
                    <a href="{{ url_for('main.page_confirmaciones') }}" class="text-white">
                        <i class="fas fa-check-circle"></i> Ver detalles
                    </a>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <h4>Acciones r√°pidas</h4>
    <div class="d-flex gap-2 flex-wrap">
      <a class="btn btn-success" href="{{ url_for('main.page_aeronaves') }}">Gestionar Aeronaves</a>
      <a class="btn btn-success" href="{{ url_for('main.page_pilotos') }}">Gestionar Pilotos</a>
      <a class="btn btn-success" href="{{ url_for('main.page_vuelos') }}">Gestionar Vuelos</a>
      <a class="btn btn-success" href="{{ url_for('main.page_confirmaciones') }}">Gestionar Confirmaciones</a>
    </div>

    <hr>

    <h4>Reportes</h4>
    <div class="d-flex gap-2 flex-wrap">
      <a class="btn btn-primary" href="{{ url_for('reports.report_dashboard') }}" target="_blank">
        <i class="fas fa-file-pdf"></i> Reporte General
      </a>
      <a class="btn btn-outline-primary" href="{{ url_for('reports.report_aeronaves') }}" target="_blank">
        <i class="fas fa-plane"></i> Reporte Aeronaves
      </a>
      <a class="btn btn-outline-primary" href="{{ url_for('reports.report_pilotos') }}" target="_blank">
        <i class="fas fa-user-tie"></i> Reporte Pilotos
      </a>
      <a class="btn btn-outline-primary" href="{{ url_for('reports.report_vuelos') }}" target="_blank">
        <i class="fas fa-route"></i> Reporte Vuelos
      </a>
      <a class="btn btn-outline-primary" href="{{ url_for('reports.report_confirmaciones') }}" target="_blank">
        <i class="fas fa-ticket-alt"></i> Reporte Confirmaciones
      </a>
    </div>
</div>
{% endblock %}
